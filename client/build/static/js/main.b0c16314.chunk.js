(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{131:function(e,t){},133:function(e,t){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(92),c=a(0),r=a.n(c),i=a(11),s=a.n(i),l=a(196),o=a(197),j=a(198),d=a(93),u=a(176),b=a(13),O=a(9),x=a(201),m=a(181),p=a(203),h=a(185),f=a(186),g=a(187),v=a(188),C=a(180),y=a(189),w=a(190),N=a(191),k=a(192),S=a(90),I=a(68),A=a.n(I),T=a(4),B=Object(c.createContext)(),D=Object(S.a)("http://localhost:5000"),E=function(e){var t=e.children,a=Object(c.useState)(!1),n=Object(b.a)(a,2),r=n[0],i=n[1],s=Object(c.useState)(!1),l=Object(b.a)(s,2),o=l[0],j=l[1],d=Object(c.useState)(),u=Object(b.a)(d,2),O=u[0],x=u[1],m=Object(c.useState)([]),p=Object(b.a)(m,2),h=p[0],f=p[1],g=Object(c.useState)(""),v=Object(b.a)(g,2),C=v[0],y=v[1],w=Object(c.useState)({}),N=Object(b.a)(w,2),k=N[0],S=N[1],I=Object(c.useState)(""),E=Object(b.a)(I,2),R=E[0],U=E[1],z=Object(c.useRef)(),P=Object(c.useRef)(),V=Object(c.useRef)();Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){x(e),z.current.srcObject=e})),D.on("me",(function(e){return U(e)})),D.on("message",(function(e){console.log("message arriv\xe9e !"),console.log(e.datas),f(e.datas)})),D.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;S({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(T.jsx)(B.Provider,{value:{call:k,callAccepted:r,myVideo:z,userVideo:P,stream:O,name:C,setName:y,callEnded:o,me:R,callUser:function(e){var t=new A.a({initiator:!0,trickle:!1,stream:O});t.on("signal",(function(t){D.emit("callUser",{userToCall:e,signalData:t,from:R,name:C})})),t.on("stream",(function(e){P.current.srcObject=e})),D.on("callAccepted",(function(e){i(!0),t.signal(e)})),V.current=t},leaveCall:function(){j(!0),V.current.destroy(),window.location.reload()},answerCall:function(){i(!0);var e=new A.a({initiator:!1,trickle:!1,stream:O});e.on("signal",(function(e){D.emit("answerCall",{signal:e,to:k.from})})),e.on("stream",(function(e){P.current.srcObject=e})),e.signal(k.signal),V.current=e},messages:h,sendMess:function(e){D.send(e)}},children:t})},R=a(178),U=a(200),z=a(88),P=a(182),V=a(183),W=a(184),F=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(O.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(O.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px"}}})),J=function(e){var t=e.children,a=Object(c.useContext)(B),r=a.me,i=a.callAccepted,s=a.name,l=a.setName,o=a.callEnded,j=a.leaveCall,u=a.callUser,O=Object(c.useState)(""),x=Object(b.a)(O,2),p=x[0],h=x[1],f=F();return Object(T.jsx)(R.a,{className:f.container,children:Object(T.jsxs)(n.a,{elevation:10,className:f.paper,children:[Object(T.jsx)("form",{className:f.root,noValidate:!0,autoComplete:"off",children:Object(T.jsxs)(C.a,{container:!0,className:f.gridContainer,children:[Object(T.jsxs)(C.a,{item:!0,xs:12,md:6,className:f.padding,children:[Object(T.jsx)(d.a,{gutterBottom:!0,variant:"h6",children:"Pseudonyme"}),Object(T.jsx)(U.a,{label:"Name",value:s,onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(T.jsx)(z.CopyToClipboard,{text:r,className:f.margin,children:Object(T.jsx)(m.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(T.jsx)(P.a,{fontSize:"large"}),children:"Copie ton secret"})})]}),Object(T.jsxs)(C.a,{item:!0,xs:12,md:6,className:f.padding,children:[Object(T.jsx)(d.a,{gutterBottom:!0,variant:"h6",children:"Appeler quelqu'un avec son secret"}),Object(T.jsx)(U.a,{label:"Son secret",value:p,onChange:function(e){return h(e.target.value)},fullWidth:!0}),i&&!o?Object(T.jsx)(m.a,{variant:"contained",color:"secondary",startIcon:Object(T.jsx)(V.a,{fontSize:"large"}),fullWidth:!0,onClick:j,className:f.margin,children:"Hang Up"}):Object(T.jsx)(m.a,{variant:"contained",color:"primary",startIcon:Object(T.jsx)(W.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return u(p)},className:f.margin,children:"Appeler la personne"})]})]})}),t]})})},M=function(){var e=Object(c.useContext)(B),t=e.answerCall,a=e.call,n=e.callAccepted;return Object(T.jsx)(T.Fragment,{children:a.isReceivingCall&&!n&&Object(T.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(T.jsxs)("h1",{children:[a.name," is calling:"]}),Object(T.jsx)(m.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},q=a(193),L=a(194),G=a(195),H=Object(u.a)((function(e){return{video:Object(O.a)({width:"800px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(O.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",margin:"10px"},media:{height:140}}})),K=function(){var e=Object(c.useContext)(B),t=e.name,a=e.callAccepted,n=e.myVideo,i=e.userVideo,s=e.callEnded,l=e.stream,o=e.call,j=H(),u=Object(c.useState)(!1),O=Object(b.a)(u,2),S=O[0],I=O[1],A=r.a.useState(!0),D=Object(b.a)(A,2),E=D[0],R=D[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(x.a,{sx:{p:1,mb:20},children:Object(T.jsx)(m.a,{startIcon:Object(T.jsx)(W.a,{}),onClick:function(){return I(!0)},color:"secondary",variant:"contained",children:"Je commence \xe0 tchater"})}),Object(T.jsxs)(p.a,{open:E,onClose:function(){return R(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(T.jsx)(h.a,{id:"alert-dialog-title",children:"Bienvenue Taiwa"}),Object(T.jsx)(f.a,{children:Object(T.jsx)(g.a,{id:"alert-dialog-description",children:"Coucou Taiwa ! Ici Tchat priv\xe9e tu cr\xe9er un pseudo tu  copi l'ID g\xe9n\xe9rer puis tu le donne \xe0 un pote :)"})}),Object(T.jsx)(v.a,{children:Object(T.jsx)(m.a,{onClick:function(){return R(!1)},color:"primary",children:"Ok j'accepte"})})]}),Object(T.jsxs)(C.a,{style:{display:S?"block":"none"},container:!0,className:j.gridContainer,children:[l&&Object(T.jsx)(y.a,{className:j.paper,children:Object(T.jsx)(w.a,{children:Object(T.jsxs)(C.a,{item:!0,xs:12,md:6,children:[Object(T.jsx)(x.a,{elevation:2,children:Object(T.jsx)("video",{playsInline:!0,muted:!0,ref:n,autoPlay:!0,className:j.video})}),Object(T.jsx)(d.a,{variant:"h5",gutterBottom:!0,children:t||"Pseudo"})]})})}),a&&!s&&Object(T.jsx)(y.a,{className:j.paper,children:Object(T.jsxs)(C.a,{item:!0,xs:12,md:6,children:[Object(T.jsx)(d.a,{variant:"h5",gutterBottom:!0,children:o.name||"Entrez un pseudo"}),Object(T.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:j.video})]})})]}),Object(T.jsx)("div",{style:{display:S?"block":"none"},children:Object(T.jsx)(J,{children:Object(T.jsx)(M,{})})}),Object(T.jsxs)(N.a,{showLabels:!0,className:j.root,children:[Object(T.jsx)(k.a,{label:"Recents",icon:Object(T.jsx)(q.a,{})}),Object(T.jsx)(k.a,{label:"Favorites",icon:Object(T.jsx)(L.a,{})}),Object(T.jsx)(k.a,{label:"Nearby",icon:Object(T.jsx)(G.a,{})})]})]})},Q=a(199),X=Object(u.a)((function(e){return{video:{},gridContainer:{},paper:{}}})),Y=function(){var e=Object(c.useContext)(B),t=e.sendMess,a=e.messages,i=r.a.useState(!0),s=Object(b.a)(i,2),l=(s[0],s[1],r.a.useState("")),o=Object(b.a)(l,2),j=o[0],d=o[1];X();return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{children:[Object(T.jsx)(n.a,{sx:{margin:10},children:a&&a.map((function(e,t){return Object(T.jsxs)(x.a,{children:[e.txt," ",Object(T.jsx)("br",{})," ",e.date]},t)}))}),Object(T.jsx)(U.a,{value:j,onChange:function(e){return d(e.target.value)},placeholder:"Ecrivez du text"}),Object(T.jsx)(m.a,{variant:"contained",color:"primary",onClick:function(){t(j),d("")},children:"R\xe9gir !"})]})})},Z=Object(u.a)((function(e){return{appBar:{},image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),$=function(){var e=Z();return Object(T.jsxs)("div",{className:e.wrapper,children:[Object(T.jsx)(l.a,{dark:"true",position:"static",children:Object(T.jsxs)(o.a,{dark:"true",children:[Object(T.jsx)(j.a,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(T.jsx)(Q.a,{})}),Object(T.jsx)(d.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Taiwa Tchat"})]})}),Object(T.jsx)(Y,{}),Object(T.jsx)(K,{})]})};a(148);s.a.render(Object(T.jsx)(E,{children:Object(T.jsx)(n.a,{elevation:3,children:Object(T.jsx)($,{})})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.b0c16314.chunk.js.map